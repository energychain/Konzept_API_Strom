openapi: 3.0.0
paths:
  /meterLocation/measuredDatas/request/v0.0.1:
    post:
      tags:
        - Anfrage von Werten (Mehrfachanfragen)
      summary: Anfrage von Mengen (Energiemenge oder Lastgang) auf Ebene Messlokation für Zeiträume
      description: <br> Mit diesem Web-Service können Energiemengen oder Lastgänge auf Ebene der Messlokation zu Zeitinvervallen angefragt werden. <br> Dies kann sowohl vom Messwerte-Hub beim MSB erfolgen, als auch von berechtigten Marktpartnern, welche zum Zeitpunkt der Anfrage der Lokation zugeordnet sind, beim Messwerte-Hub. <br> Die Anfrage erfolgt mittels der ID Der Messlokation. <br> Es ist zusätzlich verpflichtend eine Wertegranularität anzugeben '(granularity)' die angefragt wird. <br> Ebenso ist die Energieflussrichtung anzugeben welche für die Berechnung der Menge der Marktlokation notwendig ist. <br> Hinweis  wird von der Messlokation sowohl der Lastgang bzw. die Energiemenge  für den Bezug als auch für die Erzeugung benötigt, so ist der request je Energielussrichtung einmal auszuführen. <br> Als readingDateTime ist der Zeitpunkt anzugeben, zu dem der Messwert benötigt wird. <br> Das Zeitintervall umfasst mindestens einen vollständigen Kalendertag und beginnt und endet jeweils um 00:00 Uhr gesetzliche deutsche Zeit, angegeben in UTC. <br> Die Wiederholung erfolgt innerhalb des arrays im Body.
      
      parameters:
        - name: transactionId
          in: header
          description: Externe Transaktions-Id zur eindeutigen Identifikation der Anfrage.
          required: true
          style: simple
          explode: false
          schema:
            $ref: '../../../schema/transactionId.yaml#/components/schemas/transactionId'
        - name: creationDateTime
          in: header
          description: Zeitpunkt an dem der Aufruf erstellt wurde
          required: true
          style: simple
          explode: false
          schema:
            $ref: '../../../schema/creationDateTime.yaml#/components/schemas/creationDateTime'
        - name: initialTransactionId
          in: header
          description: Zur Angabe des Idempodenzschlüssel im Falle eines Retry.
          required: false
          style: simple
          explode: false
          schema:
            $ref: '../../../schema/initialTransactionId.yaml#/components/schemas/initialTransactionId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '../../schema/parameterMeasuredDatasMeterLocation.yaml#/components/schemas/parameterMeasuredDatasMeterLocation'

      responses:
        '202':
          description: accepted
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error


